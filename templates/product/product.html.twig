<div class="modalNav"> {{ productDetails.sex }}>{{ product.category }}>{{ productDetails.brand }} </div>
<div class="productInfo">
    <div class="leftSide">
        <div class="mPrPhoto"></div>
    </div>

    <div class="rightSide">
        <div class="mPrTitle"><h4>{{ product.name }}</h4></div>
        <div style="clear:both"></div>
        <div class="mPrDescription">{{ product.description }}</div>
        <br><br>
        Dostępne rozmiary:
        {% for productSize in productSizes %}
        <label class="labl">
            <input class="sizeRadio" type="radio" name="radioname" value="{{ productSize.name }}"/>
            <div>
                {{ productSize.name }}
            </div>
        </label>
        {% endfor %}
        <br>
        Dostępne kolory:
        {% for productColor in productColors %}
            {{ productColor.Color }}
        {% endfor %}
        <br>
        <input type="number" id="quantityOf{{ product.id }}" value="1">
        <div id="price" class="mPrPrice" style="float:left">{{ product.price }} zł </div>
        <div style="clear:both"></div>
        <button id="addToCartButton" onclick="addToCart('{{ product.id }}','{{ product.name }}', getQuantity({{ product.id }}),findCheckedSize(),'niebieski', {{ product.price }}); event.stopPropagation()">dodaj do koszyka</button>
        <div class="successfullyAdded" id="successfullyAdded{{ product.id }}" style="display:none">Pomyślnie dodano produkt</div>
    </div>
</div>

<div class="reviews">
    {% if not productReviews %}
        Brak opinii
    {% else %}
        {% for productReview in productReviews %}
        {{ productReview.rating }}>{{ productReview.content }}
        {% endfor %}
    {% endif %}
</div>

<script>
    function addToCart(id, productName, quantity, size, color, price) {
        var count = document.getElementById("cartCount");

        if(id === null || productName === null || quantity === null || size === null || color === null || price === null)
        {

        }else {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    count.innerHTML = +count.innerHTML + +1;
                    addToCartSuccessMsg(id);
                }
            };
            xhttp.open("GET", "addToCart/" + productName + "/" + quantity + "/" + size + "/" + color + "/" + price + "/", false);
            xhttp.send();

            updateCart();
        }

    }

    function addToCartSuccessMsg(id){
        var successMsg = document.getElementById("successfullyAdded"+id);

        successMsg.style.display = "block";
        setTimeout(function(){successMsg.style.display = "none"},3000)
    }

    function updateCart(){
        var cart = document.getElementById('shoppingCart');

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                cart.innerHTML = this.responseText;
            }
        };
        xhttp.open("GET", "http://127.0.0.1:8000/shoppingCart/", false);
        xhttp.send();
    }

    function findCheckedSize(){
        var checkedValue = null;
        var inputElements = document.getElementsByClassName('sizeRadio');
        for(var i=0; inputElements[i]; ++i){
            if(inputElements[i].checked){
                checkedValue = inputElements[i].value;
                break;
            }
        }
        return checkedValue;
    }

    function getQuantity(id) {
        var quantity = document.getElementById("quantityOf"+id).value;

        return quantity;
    }
</script>